<div class="mat-elevation-z8 tabla">
  <div
    class="example-loading-shade"
    *ngIf="isLoadingResults || isRateLimitReached"
  >
    <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
    <div class="example-rate-limit-reached" *ngIf="isRateLimitReached">
      Cargando..
    </div>
  </div>

  <a
    class="button is-primary is-small"
    aria-label="reply1"
    (click)="abrirModalTercero()"
    matTooltip="Agregar tercero"
    *ngIf="puedeGestionarTerceros"
  >
    Agregar
  </a>

  <table
    mat-table
    [dataSource]="data"
    matSort
    matSortActive="id"
    matSortDisableClear
    matSortDirection="desc"
    class="is-marginless is-paddingless"
  >
    <ng-container matColumnDef="id" class="is-marginless is-paddingless">
      <th
        mat-header-cell
        *matHeaderCellDef
        class="is-marginless is-paddingless"
      ></th>
      <td
        mat-cell
        *matCellDef="let element"
        class="is-marginless is-paddingless"
      >
        <mat-accordion [multi]="true">
          <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title>
                Tercero {{ element.clasificacionDesc }} (agregado por ejecutivo)
              </mat-panel-title>
            </mat-expansion-panel-header>

            <div class="columns is-marginless is-paddingless">
              <div class="column">
                <h6 class="title">Información Personal</h6>

                <div class="columns">
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Rut </mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ calculaDv(element.rut) }}"
                      />
                    </mat-form-field>
                  </div>
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Nombres</mat-label>
                      <input matInput disabled value="{{ element.nombres }}" />
                    </mat-form-field>
                  </div>
                </div>

                <div class="columns">
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Teléfono</mat-label>
                      <input matInput disabled value="{{ element.telefono }}" />
                    </mat-form-field>
                  </div>

                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Otro teléfono</mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.telefonoAlt }}"
                      />
                    </mat-form-field>
                  </div>
                </div>
                <div class="columns">
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Dirección</mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.direccion }}"
                      />
                    </mat-form-field>
                  </div>
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Otra dirección</mat-label>
                      <input matInput disabled value="{{ element.alias }}" />
                    </mat-form-field>
                  </div>
                </div>

                <div class="columns">
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Correo</mat-label>
                      <input matInput disabled value="{{ element.correo }}" />
                    </mat-form-field>
                  </div>

                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Otro correo</mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.correoAlt }}"
                      />
                    </mat-form-field>
                  </div>
                </div>

                <div class="columns">
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Culpabilidad</mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.culpabilidadDesc }}"
                      />
                    </mat-form-field>
                  </div>
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Clasificación</mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.clasificacionDesc }}"
                      />
                    </mat-form-field>
                  </div>
                </div>
              </div>

              <div class="column">
                <h6 class="title">Vehículo</h6>
                <div class="columns">
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Patente </mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.vehiculoPatente }}"
                      />
                    </mat-form-field>
                  </div>
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Marca</mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.vehiculoMarca }}"
                      />
                    </mat-form-field>
                  </div>
                </div>

                <div class="columns">
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Modelo </mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.vehiculoModelo }}"
                      />
                    </mat-form-field>
                  </div>
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Año</mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.vehiculoAnio }}"
                      />
                    </mat-form-field>
                  </div>
                </div>

                <div class="columns">
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Número de chasis </mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.vehiculoNumeroChasis }}"
                      />
                    </mat-form-field>
                  </div>
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Número de motor</mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.vehiculoNumeroMotor }}"
                      />
                    </mat-form-field>
                  </div>
                </div>

                <div class="columns">
                  <div class="column">
                    <mat-form-field appearance="fill">
                      <mat-label>Color </mat-label>
                      <input
                        matInput
                        disabled
                        value="{{ element.vehiculoColor }}"
                      />
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </div>

            <div class="acciones" *ngIf="puedeGestionarTerceros">
              <a
                class="button is-primary is-small"
                aria-label="reply1"
                matTooltip="Editar"
                (click)="abrirModalEditarTercero(element.id)"
              >
                <span class="icon is-large">
                  <i class="fas fa-edit" aria-hidden="true"></i>
                </span>
              </a>

              <a
                class="button is-danger is-small"
                aria-label="reply1"
                matTooltip="Eliminar"
                (click)="eliminarTercero(element.id)"
              >
                <span class="icon is-large">
                  <i class="fas fa-trash" aria-hidden="true"></i>
                </span>
              </a>
            </div>
            <div class="columns">
              <div class="column">
                <h6 class="title">Datos Equifax</h6>
              </div>
            </div>
            <div class="columns">
             
              <div class="column">
                <table class="table">
                  <thead>
                    <tr>
                      <th colspan="100">Direcciones</th>
                    </tr>
                    <tr>
                    <th>Calle</th>
                    <th>Número</th>
                    <th>Comuna</th>
                    <th>Región</th>
                  </tr>
                  </thead>
                  <tbody>
                    <tr  *ngFor="let cadaDireccion of element.direcciones">
                     <td>
                       {{cadaDireccion.calle}}
                     </td>
                     <td>
                      {{cadaDireccion.numero}}
                    </td>
                    <td>
                      {{cadaDireccion.comuna}}
                    </td>
                    <td>
                      {{cadaDireccion.region}}
                    </td>
                    </tr>
                  </tbody>
                </table>

              </div>
              <div class="column">
                <table class="table">
                  <thead>
                    <tr>
                      <th colspan="100">Teléfonos</th>
                    </tr>
                    <tr>
                    <th>Código de área</th>
                    <th>Número</th>
                  </tr>
                  </thead>
                  <tbody>
                    <tr  *ngFor="let cadaTelefono of element.telefonos">
                     <td>
                       {{cadaTelefono.codigoArea}}
                     </td>
                     <td>
                      {{cadaTelefono.numero}}
                    </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="column">
                <table class="table">
                  <thead>
                    <tr>
                      <th colspan="100">Correos</th>
                    </tr>
                    <tr>
                    <th>Correo</th>
                  </tr>
                  </thead>
                  <tbody>
                    <tr  *ngFor="let cadaCorreo of element.correos">
                     <td>
                       {{cadaCorreo.correo}}
                     </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </mat-expansion-panel>
        </mat-accordion>
      </td>
    </ng-container>

    <tr
      mat-header-row
      *matHeaderRowDef="displayedColumns"
      class="is-marginless is-paddingless"
    ></tr>
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns"
      class="is-marginless is-paddingless"
    ></tr>
  </table>

  <mat-paginator [length]="resultsLength" [pageSize]="10"></mat-paginator>
</div>
